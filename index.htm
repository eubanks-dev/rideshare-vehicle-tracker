<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Map with GPS Coordinates</title>
	<style>
		#map {
			height: 400px;
			width: 600px;
		}
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
</head>
<body>
	<div id="map"></div>
    <h3> id="distance_traveled"></h3>
	<script>
		var map;
		var markers = [];

		// Get the API key from the URL
		var searchParams = new URLSearchParams(window.location.search);
		var apiKey = searchParams.get('key');
		console.log("key from url: " + apiKey);

		// Load the Google Maps API
		var script = document.createElement('script');
		script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
		script.async = true;
		script.defer = true;
		script.onerror = function() {
			console.error('Error loading Google Maps API.');
		};
		document.head.appendChild(script);

		function initMap() {
			// Set the initial center and zoom level of the map
			map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 27.9506, lng: -82.4572},
				zoom: 12
			});

            var gpsCoordinates = [
			{lat: 27.9506, lng: -82.4572},
			{lat: 27.9511, lng: -82.4567},
			{lat: 27.9508, lng: -82.4559},
			{lat: 27.9502, lng: -82.4556},
			{lat: 27.9496, lng: -82.4560},
			{lat: 27.9493, lng: -82.4568},
			{lat: 27.9497, lng: -82.4573},
			{lat: 27.9506, lng: -82.4572}
        ];

			// Read the GPS coordinates from a file
			// fetch('gps_coordinates.json')
			// 	.then(response => response.json())
			// 	.then(data => {
			// 		// Add markers for each GPS coordinate
			// 		data.forEach(coordinate => {
			// 			var marker = new google.maps.Marker({
			// 				position: coordinate,
			// 				map: map
			// 			});
			// 			markers.push(marker);
			// 		});
			// 	})
			// 	.catch(error => {
			// 		console.error('Error fetching GPS coordinates:', error);
			// 	});

            // Add markers for each GPS coordinate
			gpsCoordinates.forEach(coordinate => {
				var marker = new google.maps.Marker({
					position: coordinate,
					map: map
				});
				markers.push(marker);
			});
		}
	</script>
	
</body>
</html>
